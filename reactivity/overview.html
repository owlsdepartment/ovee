<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reactivity Overview | Ovee.js</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Optionally reactive framework for server-side generated markup">
    <link rel="preload" href="/ovee/assets/css/0.styles.1650b211.css" as="style"><link rel="preload" href="/ovee/assets/js/app.c2e48b08.js" as="script"><link rel="preload" href="/ovee/assets/js/2.9220a685.js" as="script"><link rel="preload" href="/ovee/assets/js/15.eb5af6d3.js" as="script"><link rel="prefetch" href="/ovee/assets/js/10.9a636c08.js"><link rel="prefetch" href="/ovee/assets/js/11.ab3e3307.js"><link rel="prefetch" href="/ovee/assets/js/12.bfdb302b.js"><link rel="prefetch" href="/ovee/assets/js/13.ee17a14c.js"><link rel="prefetch" href="/ovee/assets/js/14.19d5dc7f.js"><link rel="prefetch" href="/ovee/assets/js/16.b714812f.js"><link rel="prefetch" href="/ovee/assets/js/17.7588fcdf.js"><link rel="prefetch" href="/ovee/assets/js/3.20240b92.js"><link rel="prefetch" href="/ovee/assets/js/4.0249dfe0.js"><link rel="prefetch" href="/ovee/assets/js/5.782d4282.js"><link rel="prefetch" href="/ovee/assets/js/6.f76ee8e5.js"><link rel="prefetch" href="/ovee/assets/js/7.9bdc9d34.js"><link rel="prefetch" href="/ovee/assets/js/8.89dbcd89.js"><link rel="prefetch" href="/ovee/assets/js/9.126819be.js">
    <link rel="stylesheet" href="/ovee/assets/css/0.styles.1650b211.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ovee/" class="home-link router-link-active"><!----> <span class="site-name">Ovee.js</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ovee/guide.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://www.owlsdepartment.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Authors
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/owlsdepartment/ovee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ovee/guide.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://www.owlsdepartment.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Authors
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/owlsdepartment/ovee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ovee/guide.html" class="sidebar-link">Introduction</a></li><li><a href="/ovee/components.html" class="sidebar-link">Components</a></li><li><a href="/ovee/component-decorators.html" class="sidebar-link">Component Decorators</a></li><li><a href="/ovee/modules.html" class="sidebar-link">Modules</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Reactivity</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ovee/reactivity/overview.html" aria-current="page" class="active sidebar-link">Reactivity Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ovee/reactivity/overview.html#example-building-dialog-system" class="sidebar-link">Example: Building dialog system</a></li><li class="sidebar-sub-header"><a href="/ovee/reactivity/overview.html#example-building-your-own-state-management-system-store" class="sidebar-link">Example: Building your own state management system (store)</a></li></ul></li><li><a href="/ovee/reactivity/api.html" class="sidebar-link">Reactivity API</a></li></ul></section></li><li><a href="/ovee/typescript.html" class="sidebar-link">TypeScript</a></li><li><a href="/ovee/addons.html" class="sidebar-link">Addons</a></li><li><a href="/ovee/meta.html" class="sidebar-link">Meta</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reactivity-overview"><a href="#reactivity-overview" class="header-anchor">#</a> Reactivity Overview</h1> <p>In version <code>2.1</code>, we replaced custom-made <code>Ovee.js</code> reactivity and use the one from <code>Vue 3</code> as it's fully independent from framework and is based on <code>Proxy</code> system: the same way we did! But maintaining so complex system, like reactivity, is tough, especially for a small team. So we choose to use tested and safe solution.</p> <p>In this article, we run over some basic examples of how we can use reactivity outside of the components, as currently, it's totally independent! If you're looking for a deep dive into the reactivity system implemented by <code>Vue</code> team and how it works, we recommend you this article: 👉 <a href="https://v3.vuejs.org/guide/reactivity.html" target="_blank" rel="noopener noreferrer">Reactivity in Depth<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Here you can find API with list of all available tools for reactivity and links to specific places in <code>Vue 3</code> docs: 👉 <a href="./api">Reactivity API</a>.</p> <p>Now, let's jump to some examples!</p> <h2 id="example-building-dialog-system"><a href="#example-building-dialog-system" class="header-anchor">#</a> Example: Building dialog system</h2> <p>Let's say you have a lot of dialogs and would like to keep and manage them in one, global place. We can start with a singleton class:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> instance<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DialogSystem</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'dialog-root'</span><span class="token punctuation">)</span>

        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DialogSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>So, what's going on here? We have a singleton pattern, with the static method <code>getInstance</code>. Every time, we try to call <code>DialogSystem.getInstance()</code>, we would check if <code>DialogSystem</code> instance exists and if not, we create one. Then return a new instance or a cached one. With this approach, we ensure to always have one single instance.</p> <p>Then, in the constructor, we create a new <code>div</code> element and append it to <code>body</code>. We don't care about either styling or HTML structure, we are focusing on JS functionality.</p> <p>Next, we need to add a way to store new dialogs. Let's change out <code>constructor</code>!</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ovee.js'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> instance<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DialogSystem</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        root<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'dialog-root'</span><span class="token punctuation">)</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span>

        <span class="token comment">// store dialogs</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dialogs <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We used our first reactivity tool: <code>ref</code>. It creates a reactive object with the field <code>.value</code>. If reference under <code>.value</code> changes, we would now. Example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

arr<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// &lt;- this will trigger a change!</span>
</code></pre></div><p>Coming back to our example! Let's add a method, that allows us to create dialogs!.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> markRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ovee.js'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DialogSystem</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>

    <span class="token comment">// some options for dialog</span>
    <span class="token function">createDialog</span><span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> open <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> dialog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dialog</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>dialogs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">markRaw</span><span class="token punctuation">(</span>dialog<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- markRaw?!</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>open<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> dialog<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre></div><p>So creating dialogs is quite simple: we create <code>Dialog</code> class instance (its implementation is irrelevant currently for us) and push it to the array. But what's about this <code>markRaw</code> method?!
<code>ref</code> and <code>makeReactive</code> do a little bit of magic, that unwraps any nested <code>ref</code> inside it. To prevent it, we use <code>markRaw</code> to say: &quot;We want to keep it that way, don't touch it!&quot;.</p> <p>The further part is pretty simple, if the user wants to open dialog immediately, he just needs to pass 2nd argument as <code>true</code>.</p> <p>Currently, we have a way to store and create our dialogs. Let's just define our <code>Dialog</code> class with its most important feature: opening and closing itself!</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Dialog</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isOpen <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// once again ref, but with boolean value this time</span>

        <span class="token comment">// ... do something with options</span>
    <span class="token punctuation">}</span>

    <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isOpen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isOpen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>Dialog</code> class is super simple: it just keeps its own state about being open or not. Very important note: <code>isOpen</code> is reactive!</p> <p>Now let's add a way to show our dialogs:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DialogSystem</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* ... */</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>openDialogs <span class="token operator">=</span> <span class="token function">makeComputed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dialogs<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>isOpen<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>openDialogs<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> dialog</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> acc <span class="token operator">+</span> dialog<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre></div><p>First things first: we add a helper <code>computed</code> using <code>makeComputed</code>, to track and return all of our open dialogs. It's cached, so even if we access it 1000 times, we would return the same value if none of those dialogs changed its state. Similar to <code>ref</code>, it returns an object with the <code>.value</code> field.</p> <p>Next, we use our <code>computed</code> to render dialogs. We use the magic <code>reduce</code> function and merge all dialogs in one, long, HTML string and then set it as <code>innerHTML</code> of our root element. To rerun this method every time we open/close one of the dialogs, we wrap it in <code>watchEffect</code>. This watcher automatically tracks all reactive references and reruns every time something changes, in our case: when some dialog is opened or closed.</p> <p>This is just a core concept, where you can optionally transform it into an <code>Ovee.js</code> component, add a way to destroy dialogs, unregister them, etc., but it shows you that you're free to use reactive variables and watcher's in different scenarios.</p> <p>Let's take a look on one more example: global state management.</p> <h2 id="example-building-your-own-state-management-system-store"><a href="#example-building-your-own-state-management-system-store" class="header-anchor">#</a> Example: Building your own state management system (store)</h2> <p>In frameworks like <code>Vue</code> or <code>React</code>, there is often some sort of a global state management tool. In <code>React</code>, it's <code>Flux</code>, and in <code>Vue</code> it's <code>Vuex</code>. But you can make something much simpler for your small needs with little to no effort! Let's create an object that would store fetched posts.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> postsStore <span class="token operator">=</span> <span class="token function">makeReactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    posts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    lastFetched<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

    getPostsByUserId<span class="token operator">:</span> <span class="token function">makeComputed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> post<span class="token punctuation">.</span>user_id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    readPosts<span class="token operator">:</span> <span class="token function">makeComputed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> post<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'read'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Now we use <code>makeReactive</code> to create a reactive object that can track changes in it's fields. We initialized <code>posts</code> field, to keep our posts and created two computeds:</p> <ul><li><code>getPostsByUserId</code>, that returns a function which than, based on passed <code>id</code> and state, returns different values</li> <li><code>readPosts</code> that always returns only <code>read</code> posts</li></ul> <p>Now we can use it in our component, especially cool in <code>TemplateComponent</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> postsStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PostsList</span> <span class="token keyword">extends</span> <span class="token class-name">TemplateComponent</span> <span class="token punctuation">{</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;ul&gt;
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>postsStore<span class="token punctuation">.</span>readPosts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
            &lt;/ul&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note, that because we used <code>makeReactive</code>, we don't need to use <code>.value</code> when accessing <code>makeComputed</code> values.</p> <p>We can also make a list of all user-specific posts using <code>data-</code> attribute:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> postsStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PostsList</span> <span class="token keyword">extends</span> <span class="token class-name">TemplateComponent</span> <span class="token punctuation">{</span>
    @<span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    @<span class="token function">dataParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    id<span class="token punctuation">;</span>

    <span class="token function">template</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;ul&gt;
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>postsStore<span class="token punctuation">.</span><span class="token function">getPostsByUserId</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">post</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                    html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;</span><span class="token template-punctuation string">`</span></span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
            &lt;/ul&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Because <code>postsStore</code> is super simple and in no way protected, everybody can change its state.</p> <p>To prevent that and minimalize bugs potential, you can restrict yourself and create special object with methods, named <code>postsMutations</code> or <code>postsActions</code>. Only methods from that object will be allowed to change our state.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// or export const postsMutations = { ... }</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> postsActions <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* just do some fecthing... */</span>
        <span class="token keyword">const</span> posts <span class="token operator">=</span> ajax<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span> <span class="token comment">/* ... */</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

        postsStore<span class="token punctuation">.</span>posts <span class="token operator">=</span> posts<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">removePost</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> toRemove <span class="token operator">=</span> postsStore<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> post<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>toRemove <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            postsStore<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>toRemove<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <p>These are just few exemples of all the possibilities you can do with reactive tools!</p> <p>In near future we plan to add <code>Ovee.js</code> store pattern implementation as a new module. Keep an eye for our updates! 😀</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/15/2021, 5:19:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ovee/modules.html" class="prev">
        Modules
      </a></span> <span class="next"><a href="/ovee/reactivity/api.html">
        Reactivity API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ovee/assets/js/app.c2e48b08.js" defer></script><script src="/ovee/assets/js/2.9220a685.js" defer></script><script src="/ovee/assets/js/15.eb5af6d3.js" defer></script>
  </body>
</html>
