<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Components | Ovee.js</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Optionally reactive framework for server-side generated markup">
    <link rel="preload" href="/ovee/assets/css/0.styles.1650b211.css" as="style"><link rel="preload" href="/ovee/assets/js/app.3dc06bdb.js" as="script"><link rel="preload" href="/ovee/assets/js/2.9220a685.js" as="script"><link rel="preload" href="/ovee/assets/js/9.b63b7f3e.js" as="script"><link rel="preload" href="/ovee/assets/js/3.20240b92.js" as="script"><link rel="prefetch" href="/ovee/assets/js/10.9a636c08.js"><link rel="prefetch" href="/ovee/assets/js/11.ab3e3307.js"><link rel="prefetch" href="/ovee/assets/js/12.bfdb302b.js"><link rel="prefetch" href="/ovee/assets/js/13.ee17a14c.js"><link rel="prefetch" href="/ovee/assets/js/14.19d5dc7f.js"><link rel="prefetch" href="/ovee/assets/js/15.51f903db.js"><link rel="prefetch" href="/ovee/assets/js/16.00f0af3f.js"><link rel="prefetch" href="/ovee/assets/js/17.7588fcdf.js"><link rel="prefetch" href="/ovee/assets/js/4.0249dfe0.js"><link rel="prefetch" href="/ovee/assets/js/5.782d4282.js"><link rel="prefetch" href="/ovee/assets/js/6.f76ee8e5.js"><link rel="prefetch" href="/ovee/assets/js/7.9bdc9d34.js"><link rel="prefetch" href="/ovee/assets/js/8.89dbcd89.js">
    <link rel="stylesheet" href="/ovee/assets/css/0.styles.1650b211.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ovee/" class="home-link router-link-active"><!----> <span class="site-name">Ovee.js</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ovee/guide.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://www.owlsdepartment.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Authors
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/owlsdepartment/ovee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ovee/guide.html" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://www.owlsdepartment.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Authors
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/owlsdepartment/ovee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ovee/guide.html" class="sidebar-link">Introduction</a></li><li><a href="/ovee/components.html" aria-current="page" class="active sidebar-link">Components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ovee/components.html#what-is-a-component" class="sidebar-link">What is a Component</a></li><li class="sidebar-sub-header"><a href="/ovee/components.html#declaring-and-registering-components" class="sidebar-link">Declaring and Registering Components</a></li><li class="sidebar-sub-header"><a href="/ovee/components.html#component-lifecycle" class="sidebar-link">Component Lifecycle</a></li><li class="sidebar-sub-header"><a href="/ovee/components.html#linking-to-dom" class="sidebar-link">Linking to DOM</a></li><li class="sidebar-sub-header"><a href="/ovee/components.html#dom-references" class="sidebar-link">DOM References</a></li><li class="sidebar-sub-header"><a href="/ovee/components.html#event-handling" class="sidebar-link">Event Handling</a></li><li class="sidebar-sub-header"><a href="/ovee/components.html#reactivity-and-watching-properties" class="sidebar-link">Reactivity and Watching Properties</a></li><li class="sidebar-sub-header"><a href="/ovee/components.html#template-components" class="sidebar-link">Template Components</a></li></ul></li><li><a href="/ovee/component-decorators.html" class="sidebar-link">Component Decorators</a></li><li><a href="/ovee/modules.html" class="sidebar-link">Modules</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Reactivity</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ovee/reactivity/overview.html" class="sidebar-link">Reactivity Overview</a></li><li><a href="/ovee/reactivity/api.html" class="sidebar-link">Reactivity API</a></li></ul></section></li><li><a href="/ovee/typescript.html" class="sidebar-link">TypeScript</a></li><li><a href="/ovee/addons.html" class="sidebar-link">Addons</a></li><li><a href="/ovee/meta.html" class="sidebar-link">Meta</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="components"><a href="#components" class="header-anchor">#</a> Components</h1> <p></p><div class="table-of-contents"><ul><li><a href="#what-is-a-component">What is a Component</a></li><li><a href="#declaring-and-registering-components">Declaring and Registering Components</a></li><li><a href="#component-lifecycle">Component Lifecycle</a></li><li><a href="#linking-to-dom">Linking to DOM</a></li><li><a href="#dom-references">DOM References</a></li><li><a href="#event-handling">Event Handling</a></li><li><a href="#reactivity-and-watching-properties">Reactivity and Watching Properties</a></li><li><a href="#template-components">Template Components</a></li></ul></div><p></p> <h2 id="what-is-a-component"><a href="#what-is-a-component" class="header-anchor">#</a> What is a Component</h2> <p>Component is a building block of your website or an application. In Ovee.js, it is represented by a class and corresponding markup. The framework detects html tag matching the component by either tag name, or a data parameter. Each instance of matched tag gets its own instance of component class.</p> <p>Let's take a look at an example:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>counter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>counter__value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>counter__button<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>increment!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    Component<span class="token punctuation">,</span>
    bind<span class="token punctuation">,</span>
    el<span class="token punctuation">,</span>
    reactive<span class="token punctuation">,</span>
    register<span class="token punctuation">,</span>
    watch
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ovee.js'</span><span class="token punctuation">;</span>

@<span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    @<span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    @<span class="token function">el</span><span class="token punctuation">(</span><span class="token string">'.counter__value'</span><span class="token punctuation">)</span>
    valueElement<span class="token punctuation">;</span>

    @<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'.counter__button'</span><span class="token punctuation">)</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @<span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>valueElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>valueElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Current value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As we can see, within component class we can reference children elements that are contained within its corresponding DOM node. The framework gives us convinient mechanisms to bind events, DOM elements and react to data changes.</p> <h2 id="declaring-and-registering-components"><a href="#declaring-and-registering-components" class="header-anchor">#</a> Declaring and Registering Components</h2> <p>A component has to extend base <code>Component</code> class. For convenience, we provide <code>@register()</code> decorator, which defines the name that will be used to corelate it with a matching DOM element. Underneath, we define a custom element. Alternatively, you may define a <code>static getName()</code> method that would return a name.</p> <p>In normal circumstances, you would not instantiate a <code>Component</code> manually. Instead, you should use <code>registerComponent()</code> method of <code>App</code> or pass it as an <code>App</code> argument. The <code>App</code> instance is responsible of handling instantiating and destroying components. More info about registering components within the <code>App</code> <a href="/guide#initialization">here</a>.</p> <h2 id="component-lifecycle"><a href="#component-lifecycle" class="header-anchor">#</a> Component Lifecycle</h2> <p>A component's lifecycle is prerty straightforward. In most cases, you shuld not override its constructor. Instead, use lifecycle hooks.
<div class="mermaid">
graph TD
A[&quot;new Component&quot;] -- &quot;binding refs, events, evaluating decorators&quot; --&gt; B[&quot;init()&quot;];
B --&gt; C[&quot;component is up and running&quot;];
C -. &quot;events and watchers loop&quot; .-&gt; C
C -- &quot;unbinding refs and events&quot; --&gt; Z[&quot;destroy()&quot;];
class A,B,C,Z className;
classDef className fill:#fafafe,stroke:#323edd,color:#323edd,stroke-width:2px;
</div></p> <p>All the initialization should be done within <code>init()</code> hook. Please mind, that it might be called in asynchronous manner in relation to constructor.</p> <p>Bindings that were done using <code>$on()</code> method or <code>@bind()</code> decorator are automatically unbound during teardown. But in cases when you are using some external libraries or do manual event listener bindings, you should unbind and destroy them within <code>destroy()</code> hook.</p> <h2 id="linking-to-dom"><a href="#linking-to-dom" class="header-anchor">#</a> Linking to DOM</h2> <p>Ovee.js is using <code>MutationObserver</code> to handle changes in DOM and automatically initialize and teardown component instances. Within a <code>Component</code> instance, you always have access to its DOM node counterpart using <code>this.$element</code> property.</p> <p>In many cases, you'll need to access component's child elements. While you can simply access them using DOM selectors, e.g. <code>this.$element.querySelector('.button')</code>, the framework provies you with a convenient way to link them dynamically to component properties. To acheive that, you can use <code>@el</code> directive.</p> <div class="language-js extra-class"><pre class="language-js"><code>@<span class="token function">el</span><span class="token punctuation">(</span><span class="token string">'.button--next'</span><span class="token punctuation">)</span>
buttonNextElement<span class="token punctuation">;</span>
</code></pre></div><p>By default, the directive will use <code>querySelector()</code> to match a single <a href="https://developer.mozilla.org/en-US/docs/Web/API/element" target="_blank" rel="noopener noreferrer"><code>Element</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. There are also cases, when you instead need to access a list of elements, for example to access all slides within a slider.</p> <div class="language-js extra-class"><pre class="language-js"><code>@<span class="token function">el</span><span class="token punctuation">(</span><span class="token string">'.slide'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> list<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
slideElementList<span class="token punctuation">;</span>
</code></pre></div><p>In such case, you can pass <code>list: true</code> option to <code>@el</code> directive. Underneath, <code>querySelectorAll()</code> will be called, so you'll get static <a href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList" target="_blank" rel="noopener noreferrer"><code>NodeList</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> instance hooked into the property.</p> <p>Additional profit of using this method is that the framework will update the property automatically when the DOM structure changes. Please mind, that in case of using <code>list: true</code> parameter, the whole <code>NodeList</code> will be updated each time a matching change in component's DOM occurs.</p> <h2 id="dom-references"><a href="#dom-references" class="header-anchor">#</a> DOM References</h2> <p>Using <code>@el()</code> directive is a very convenient way to hook child elements into component properties. Although, in some cases like creating generic, reusable components, you might want to avoid using CSS selectors. Instead, you can use references mechanism. To acheive this, you mark a reference in your markup using <code>ref</code> property. For example:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button button--next<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>buttonNext<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Next<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Now in the component, you can access all refered buttons:</p> <div class="language- extra-class"><pre class="language-text"><code>this.$refs.buttonNext
</code></pre></div><p>For each <code>$refs</code> key, you'll get an array of matching nodes. Refs are automatically updated, when DOM changes. If you ever used Vue, you might be familiar with this mechanism. However, please mind that while in Vue component's markup template is always known, in Ovee.js the same JS component class may be used with different markup structures. Therefore, you should always write your code to check, if the reference is even there. The most convenient way is to use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" target="_blank" rel="noopener noreferrer">optional chanining operator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language- extra-class"><pre class="language-text"><code>this.$refs?.searchInput?.focus?.();
</code></pre></div><h2 id="event-handling"><a href="#event-handling" class="header-anchor">#</a> Event Handling</h2> <p>There are two ways to listen events on a component, using:</p> <ul><li>decorator <code>@bind()</code></li> <li><code>this.$on()</code> and <code>this.$off()</code></li></ul> <p>In previous example, we enabled listening of a <code>click</code> event on a button using decorator <code>@bind</code>. It expects 2 arguments: first is an event or list of space seperated events to listen and second is an optional selector. If not passed, we will listen on root <code>this.$element</code>. This example shows us, how to listen on <code>focus</code> and <code>blur</code> on a parent and <code>click</code> on inner button:</p> <div class="language-js extra-class"><pre class="language-js"><code>@<span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'base-example'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    <span class="token comment">// some code</span>

    @<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'.counter__button'</span><span class="token punctuation">)</span>
    <span class="token function">onButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// handle click</span>
    <span class="token punctuation">}</span>

    @<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'focus blur'</span><span class="token punctuation">)</span>
    <span class="token function">onFocusChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// handle focus</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can do the same using <code>this.$on</code>, that we gain by extending <code>Component</code> class. <code>$on</code> method is chainable as it returns <code>this</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code>@<span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'base-example'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    <span class="token comment">// some code</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'.counter__button'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onButtonClick<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'focus blur'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onFocusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">onButtonClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// handle click</span>
    <span class="token punctuation">}</span>

    <span class="token function">onFocusChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// handle focus</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Notice, that we don't have to remove those listeners. When component is being destroyed, they are automatically removed. If you would like to remove listener earlier, for any reason, you can do it manually by using <code>$off</code>. Decorator <code>@bind</code> uses <code>$on</code> internally.</p> <p>Full signature for methods <code>$on</code> and <code>$off</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">$on</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">$on</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">$on</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> target<span class="token operator">:</span> Element<span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">$on</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> target<span class="token operator">:</span> Element<span class="token punctuation">,</span> selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">$off</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">$off</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">$off</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> target<span class="token operator">:</span> Element<span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">$off</span><span class="token punctuation">(</span>events<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> target<span class="token operator">:</span> Element<span class="token punctuation">,</span> selector<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> Callback<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="reactivity-and-watching-properties"><a href="#reactivity-and-watching-properties" class="header-anchor">#</a> Reactivity and Watching Properties</h2> <p><code>Ovee.js</code> allows you to make some class property reactive, that is when it gets changed, all other reactive elements and watchers, that depend on this property, are notified about that. Reactivity is really useful in <code>TemplateComponent</code> that we cover in a next section.</p> <p>To make property reactive, we use decorator <code>@reactive</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    @<span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>It's not doing much by itself, but what if we want to do something, when it is changed? We would then use decorator <code>@watch</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    @<span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    @<span class="token function">watch</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">)</span>
    <span class="token function">onCounterChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Counter was changed to: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now we will be notified when <code>counter</code> is changed.</p> <p>Decorator <code>@watch</code> accepts two arguments:</p> <ul><li><code>watchSource</code> - string path to component reactive property (could be something like <code>obj.a</code>), <code>ref</code> instance, or method that returns value from reactive object (more details in <a href="/ovee/component-decorators.html#watch">@watch</a> section)</li> <li>optional object with field <code>immediate</code> that accepts <code>boolean</code>. If <code>immediate</code> is <code>true</code>, watching method will be called immediatly after component initialization with current value. In other case, it will be called only when something changes.</li></ul> <p>Method, that we decorate, will receive 2 arguments:</p> <ul><li>current value</li> <li>previous value</li></ul> <p><strong>Important!</strong> <code>@watch</code> can only watch properties marked as <code>@reactive</code> as in <code>Ovee.js</code> nothing is reactive by default in opposite to frameworks like <code>Vue</code>, <code>React</code> or <code>Angular</code>.</p> <p><strong>Deprecation Note:</strong> In <code>Ovee,js</code> versions below <code>2.1</code>, watch callback received 3rd argument, watch path, which was removed as of <code>2.1</code>.</p> <p>Since <code>v2.1</code>, we can also use another decorator <code>@watchEffect</code>, which doesn't require specific watch source. It automatically catches all reactive references.</p> <p>Example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span>
    @<span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    @<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">onCounterChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Counter was changed to: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>@watchEffect</code> runs immediately and on a first run does magic with gathering necessary references. More on that: <a href="/ovee/component-decorators.html#watcheffect">@watchEffect</a></p> <p>You can read more about <code>reactivity</code> in <a href="/reactivity/overview">Reactivity overview</a>.</p> <h2 id="template-components"><a href="#template-components" class="header-anchor">#</a> Template Components</h2> <p>In earlier example, with <code>counter</code> component, we had to update DOM manually when <code>this.counter</code> value was changed. But we can do it easier, by using <code>TemplateComponent</code> and implementing it's method <code>template</code>. Example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
    TemplateComponent<span class="token punctuation">,</span>
    bind<span class="token punctuation">,</span>
    reactive<span class="token punctuation">,</span>
    register
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ovee.js'</span><span class="token punctuation">;</span>

@<span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> TemplateComponent <span class="token punctuation">{</span>
    @<span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    @<span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'.counter__button'</span><span class="token punctuation">)</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;p class=&quot;counter__value&quot;&gt;Current value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>counter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
            &lt;button class=&quot;counter__button&quot;&gt;increment!&lt;/button&gt;
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We do not need <code>valueElement</code> property and <code>update</code> method. If property used in <code>template</code> method is reactive, DOM will be updated automatically.</p> <p>Sometimes, you would like to force template to rerender, because of some non-reactive change or you would like to wait for current pending updates.
Then you can use <code>this.$requestUpdate()</code> method that returns <code>Promise</code> that will resolve after rerender.</p> <p>If you want to run init code after the template is first time rendered into DOM, then you can <code>await this.$requestUpdate()</code> in <code>init</code> function.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> TemplateComponent<span class="token punctuation">,</span> register <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'ovee.js'</span><span class="token punctuation">;</span>

@<span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'counter'</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> TemplateComponent <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.some-wrapper'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// will print `null`, as template wasn't rendered yet</span>

        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$requestUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$element<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.some-wrapper'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// will print element instance</span>
    <span class="token punctuation">}</span>

    <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class=&quot;some-wrapper&quot;&gt;&lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To render template, template components uses <a href="https://github.com/polymer/lit-html" target="_blank" rel="noopener noreferrer"><code>lit-html</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Guide: <a href="https://lit-html.polymer-project.org/guide" target="_blank" rel="noopener noreferrer">https://lit-html.polymer-project.org/guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>We are also recomending some tools and helpers for <code>lit-html</code> to use with your IDE: <a href="https://lit-html.polymer-project.org/guide/tools#ide-plugins" target="_blank" rel="noopener noreferrer">https://lit-html.polymer-project.org/guide/tools#ide-plugins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or for <code>VS Code</code>: <a href="https://marketplace.visualstudio.com/items?itemName=bierner.lit-html" target="_blank" rel="noopener noreferrer">https://marketplace.visualstudio.com/items?itemName=bierner.lit-html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/29/2021, 10:11:30 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ovee/guide.html" class="prev">
        Introduction
      </a></span> <span class="next"><a href="/ovee/component-decorators.html">
        Component Decorators
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ovee/assets/js/app.3dc06bdb.js" defer></script><script src="/ovee/assets/js/2.9220a685.js" defer></script><script src="/ovee/assets/js/9.b63b7f3e.js" defer></script><script src="/ovee/assets/js/3.20240b92.js" defer></script>
  </body>
</html>
